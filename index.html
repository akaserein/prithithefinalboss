<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prithi The Final Boss ‚Äî Player</title>
  <style>
    :root{
      --pink: #ffb6c1;
      --black: #000;
      --card-bg: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,sans-serif;background:#000;color:var(--pink)}
    /* animated pink+black background (subtle) */
    body{
      background: linear-gradient(-45deg, #000000 0%, #0a0a0a 30%, #110101 60%, var(--pink) 100%);
      background-size: 400% 400%;
      animation: bgShift 12s ease infinite;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    @keyframes bgShift{
      0% {background-position:0% 50%;}
      50% {background-position:100% 50%;}
      100% {background-position:0% 50%;}
    }

    /* Container */
    .card {
      width: min(920px, 96vw);
      max-width: 920px;
      background: var(--card-bg);
      border-radius: 14px;
      padding: 18px;
      display:flex;
      gap: 26px;
      align-items:center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      backdrop-filter: blur(6px);
    }

    /* Left: player + info */
    .left {
      min-width: 260px;
      max-width: 360px;
      flex: 1;
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:flex-start;
    }

    .title {
      display:flex;
      align-items:center;
      gap:10px;
    }
    .title h1{
      font-size:1.05rem;
      margin:0;
      color:var(--pink);
      font-weight:600;
    }
    .tag {
      font-size:0.8rem;
      color:#ffdfe6;
      padding:4px 8px;
      border-radius:999px;
      background: rgba(255,182,193,0.06);
    }

    /* Small, standard native player with tidy look */
    .player-wrap {
      width:100%;
      display:flex;
      align-items:center;
      gap:12px;
    }
    audio {
      width: 100%;
      height:36px;
      border-radius:8px;
      background:#050505;
      padding:6px;
      outline:none;
    }

    /* controls row */
    .controls {
      display:flex;
      gap:8px;
      align-items:center;
      width:100%;
      flex-wrap:wrap;
    }

    .btn, .small {
      background: transparent;
      border: 1px solid rgba(255,182,193,0.09);
      color: var(--pink);
      padding:8px 10px;
      border-radius:8px;
      cursor:pointer;
      font-size:0.9rem;
    }
    .btn:hover, .small:hover { transform: translateY(-2px); transition:0.15s; }

    .small { padding:6px 8px; font-size:0.85rem; }

    .speed-row {
      display:flex;
      gap:8px;
      align-items:center;
    }

    .speed-display {
      min-width:56px;
      text-align:center;
      color:#ffdfe6;
      font-size:0.9rem;
    }

    input[type="range"] {
      -webkit-appearance:none;
      width:160px;
      background:transparent;
    }
    input[type="range"]::-webkit-slider-runnable-track{height:6px;background:rgba(255,182,193,0.12);border-radius:6px;}
    input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;margin-top:-6px;width:16px;height:16px;border-radius:50%;background:var(--pink);box-shadow:0 1px 6px rgba(0,0,0,0.6);}

    .meta {
      margin-top:6px;
      color:#bbb;
      font-size:0.85rem;
    }

    /* Right: visual bars */
    .visual {
      width: 170px;
      display:flex;
      align-items:flex-end;
      gap:8px;
      height:84px;
      justify-content:center;
    }
    .bar {
      width: 12px;
      background: linear-gradient(180deg, rgba(255,182,193,1), rgba(255,182,193,0.25));
      border-radius:6px;
      height: 12px;
      transition: height 120ms linear;
      box-shadow: 0 4px 10px rgba(255,182,193,0.06);
    }

    /* footer small */
    .footer {
      margin-top:8px;
      color:#9a9a9a;
      font-size:0.8rem;
    }

    /* responsive */
    @media (max-width:720px){
      .card { flex-direction:column; gap:12px; align-items:center; padding:16px; }
      .visual { width:100%; justify-content:space-around; height:64px; }
      .left { align-items:center; text-align:center; }
      .player-wrap { flex-direction:column; gap:8px; }
    }

    /* toast */
    .toast {
      position: fixed;
      left: 50%;
      bottom: 24px;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.06);
      color: #fff;
      padding:10px 14px;
      border-radius:8px;
      font-size:0.9rem;
      box-shadow: 0 8px 30px rgba(0,0,0,0.6);
      opacity:0;
      pointer-events:none;
      transition: opacity 220ms ease, transform 220ms ease;
    }
    .toast.show { opacity:1; transform: translateX(-50%) translateY(-6px); pointer-events:auto; }
  </style>
</head>
<body>
  <div class="card" role="region" aria-label="Audio player card">
    <div class="left">
      <div class="title">
        <h1>Average Non IITIAN</h1>
        <div class="tag">Prithi The Final Boss</div>
      </div>

      <div class="player-wrap">
        <audio id="player" controls preload="auto">
          <source src="AverageNonIITIAN.mp3" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
      </div>

      <div class="controls" aria-hidden="false">
        <div class="speed-row">
          <button class="small" id="decSpeed" title="Decrease speed">-</button>
          <input id="speedRange" type="range" min="0.5" max="2" step="0.05" value="1" aria-label="Playback speed">
          <button class="small" id="incSpeed" title="Increase speed">+</button>
          <div class="speed-display" id="speedDisplay">1.00√ó</div>
        </div>

        <div style="display:flex; gap:8px; margin-left:8px;">
          <button class="btn" id="modeBtn" title="Toggle visual mode">Mode: Audio</button>
          <button class="btn" id="randomBtn" title="Trigger random animation">Randomize</button>
          <button class="btn" id="shareBtn" title="Share this page">Share</button>
        </div>
      </div>

      <div class="meta" id="meta">
        <div id="time">‚è∞ --:--:--</div>
        <div id="date">üìÖ --/--/----</div>
      </div>

      <div class="footer">Tip: Play audio once to enable visual mode (browser requires interaction).</div>
    </div>

    <div class="visual" id="visual">
      <div class="bar" data-i="0"></div>
      <div class="bar" data-i="1"></div>
      <div class="bar" data-i="2"></div>
      <div class="bar" data-i="3"></div>
      <div class="bar" data-i="4"></div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // Elements
    const audio = document.getElementById('player');
    const bars = Array.from(document.querySelectorAll('.bar'));
    const modeBtn = document.getElementById('modeBtn');
    const randomBtn = document.getElementById('randomBtn');
    const shareBtn = document.getElementById('shareBtn');
    const speedRange = document.getElementById('speedRange');
    const speedDisplay = document.getElementById('speedDisplay');
    const decSpeed = document.getElementById('decSpeed');
    const incSpeed = document.getElementById('incSpeed');
    const toast = document.getElementById('toast');

    // Time & date
    function updateTime(){ const now = new Date();
      document.getElementById('time').textContent = '‚è∞ ' + now.toLocaleTimeString();
      document.getElementById('date').textContent = 'üìÖ ' + now.toLocaleDateString();
    }
    setInterval(updateTime,1000); updateTime();

    // Playback speed controls
    function setSpeed(v){
      v = Math.max(0.5, Math.min(2, Number(v)));
      audio.playbackRate = v;
      speedRange.value = v;
      speedDisplay.textContent = v.toFixed(2) + '√ó';
    }
    speedRange.addEventListener('input', e => setSpeed(e.target.value));
    decSpeed.addEventListener('click', () => setSpeed((+speedRange.value - 0.1).toFixed(2)));
    incSpeed.addEventListener('click', () => setSpeed((+speedRange.value + 0.1).toFixed(2)));
    setSpeed(1);

    // Toast helper
    function showToast(msg, ms = 2000){
      toast.textContent = msg; toast.classList.add('show');
      clearTimeout(toast._t); toast._t = setTimeout(()=>toast.classList.remove('show'), ms);
    }

    // Share button
    shareBtn.addEventListener('click', async () => {
      const shareUrl = location.href;
      const shareData = { title: document.title, text: 'Listen: Average Non IITIAN', url: shareUrl };
      try {
        if (navigator.share) {
          await navigator.share(shareData);
        } else if (navigator.clipboard) {
          await navigator.clipboard.writeText(shareUrl);
          showToast('Link copied to clipboard');
        } else {
          showToast('Share not supported');
        }
      } catch (err) {
        showToast('Share cancelled');
      }
    });

    // Visual modes: 'audio' or 'random'
    let visualMode = 'audio';
    modeBtn.addEventListener('click', () => {
      visualMode = (visualMode === 'audio') ? 'random' : 'audio';
      modeBtn.textContent = 'Mode: ' + (visualMode === 'audio' ? 'Audio' : 'Random');
      showToast('Mode: ' + (visualMode === 'audio' ? 'Audio-reactive' : 'Random'));
    });

    // Randomize button triggers a burst animation
    randomBtn.addEventListener('click', () => {
      triggerRandomBurst();
    });

    // AudioContext + analyser (lazy init on first play/click)
    let audioCtx = null, analyser = null, dataArray = null, source = null;
    function initAudioContext(){
      if (audioCtx) return;
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioCtx.createAnalyser();
      analyser.fftSize = 256;
      const bufferLength = analyser.frequencyBinCount;
      dataArray = new Uint8Array(bufferLength);
      try {
        source = audioCtx.createMediaElementSource(audio);
        source.connect(analyser);
        analyser.connect(audioCtx.destination);
      } catch(err){
        console.warn('AudioContext createMediaElementSource failed', err);
      }
    }

    // Animation loop
    let rafId = null;
    function drawLoop(){
      if (visualMode === 'audio' && analyser && audioCtx && !audio.paused){
        analyser.getByteFrequencyData(dataArray);
        const chunk = Math.floor(dataArray.length / bars.length);
        for (let i=0;i<bars.length;i++){
          let sum = 0;
          for (let j=i*chunk;j<(i+1)*chunk;j++){ sum += dataArray[j] || 0; }
          const avg = sum / chunk / 255; // 0..1
          const minH = 10, maxH = 72;
          bars[i].style.height = (minH + avg * (maxH - minH)) + 'px';
        }
      } else if (visualMode === 'random'){
        // Gentle random animation (smooth using sin + noise)
        const t = Date.now() / 600;
        for (let i=0;i<bars.length;i++){
          const base = (Math.sin(t * (1 + i*0.3) + i) + 1) / 2; // 0..1
          const noise = Math.random() * 0.35;
          const val = Math.min(1, base * 0.9 + noise * 0.6);
          const minH = 10, maxH = 72;
          bars[i].style.height = (minH + val * (maxH - minH)) + 'px';
        }
      } else {
        // idle state: soft pulsing
        const t = Date.now()/1000;
        for (let i=0;i<bars.length;i++){
          const val = 0.15 + 0.1 * Math.sin(t * (1+i*0.4));
          bars[i].style.height = (10 + val * 40) + 'px';
        }
      }
      rafId = requestAnimationFrame(drawLoop);
    }
    drawLoop();

    // Trigger a random burst (quick big heights)
    function triggerRandomBurst(){
      const prevMode = visualMode;
      visualMode = 'random';
      for (let i=0;i<bars.length;i++){
        const h = 20 + Math.random() * 80;
        bars[i].style.height = h + 'px';
        bars[i].style.transition = 'height 180ms ease';
      }
      setTimeout(()=> {
        // restore smooth transition
        bars.forEach(b => b.style.transition = 'height 120ms linear');
        visualMode = prevMode;
      }, 600);
    }

    // Ensure AudioContext resumes on user interaction (some browsers require this)
    audio.addEventListener('play', async () => {
      initAudioContext();
      if (audioCtx && audioCtx.state === 'suspended') {
        try { await audioCtx.resume(); } catch(e){ console.warn(e); }
      }
    });

    // Also init on first click anywhere to be safe
    window.addEventListener('pointerdown', () => {
      initAudioContext();
    }, { once: true });

    // Clean up on unload
    window.addEventListener('unload', () => {
      if (audioCtx && audioCtx.close) audioCtx.close();
      cancelAnimationFrame(rafId);
    });

  </script>
</body>
</html>









<!-- Play TTT Button Section -->
<div style="margin-top:40px; text-align:center;">
  <h2 style="color:#ffb6c1; font-family:system-ui;">üéÆ Play Tic Tac Toe</h2>
  <a class="btn-ttt" href="ttt.html">‚ñ∂Ô∏è Play Now</a>
</div>

<style>
  .btn-ttt {
    display: inline-block;
    margin-top: 12px;
    background: #111;
    color: #ffb6c1;
    border: 2px solid #ffb6c1;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
  }
  .btn-ttt:hover {
    background: #ffb6c1;
    color: #000;
    transform: scale(1.05);
  }
</style>
