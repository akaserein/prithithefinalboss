<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Play Tic-Tac-Toe — Prithi The Final Boss</title>
<style>
  :root{--bg:#000;--pink:#ffb6c1;--card:#111;--muted:#9a9a9a}
  html,body{height:100%;margin:0;background:var(--bg);font-family:Inter,system-ui,sans-serif;color:var(--pink);display:flex;align-items:center;justify-content:center;padding:18px}
  .wrap{width:min(540px,96vw);background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:18px;border-radius:14px;box-shadow:0 12px 30px rgba(0,0,0,0.6);text-align:center}
  h1{margin:0 0 8px;font-size:1.1rem}
  .meta{color:var(--muted);font-size:0.9rem;margin-bottom:14px}
  .board{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;width:100%;max-width:360px;margin:0 auto}
  .cell{aspect-ratio:1/1;background:var(--card);display:flex;align-items:center;justify-content:center;font-size:2.2rem;font-weight:700;color:var(--pink);border-radius:10px;cursor:pointer;user-select:none;transition:transform .08s ease,box-shadow .12s}
  .cell:active{transform:scale(.98)}
  .controls{display:flex;gap:10px;justify-content:center;margin-top:14px;flex-wrap:wrap}
  button{background:transparent;border:1px solid rgba(255,182,193,0.08);color:var(--pink);padding:8px 12px;border-radius:8px;cursor:pointer}
  .status{margin-top:12px;color:#fff;font-weight:600}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,1);display:none;align-items:center;justify-content:center;z-index:9999}
  .overlay.show{display:flex}
  .return{position:fixed;top:18px;left:18px;background:#111;color:var(--pink);padding:8px 12px;border-radius:8px;border:1px solid rgba(255,182,193,0.06);cursor:pointer}
  @media(max-width:520px){.cell{font-size:1.6rem}}
</style>
</head>
<body>
  <button class="return" onclick="goBack()">Return to Prithi's legacy page</button>

  <div class="wrap" id="app">
    <h1>Tic-Tac-Toe</h1>
    <div class="meta">Play vs local 2 players — tap a square to move</div>

    <div class="board" id="board" aria-label="tic tac toe board"></div>

    <div class="status" id="status">Turn: <span id="turn">X</span></div>

    <div class="controls">
      <button id="btnRestart">Restart</button>
      <button id="btnResetScore">Reset Score</button>
    </div>

    <div style="margin-top:12px;color:var(--muted);font-size:0.9rem">
      X wins: <span id="scoreX">0</span> • O wins: <span id="scoreO">0</span> • Draws: <span id="scoreD">0</span>
    </div>
  </div>

<script>
  // Basic, robust tic-tac-toe (no frameworks)
  const boardEl = document.getElementById('board');
  const statusTurn = document.getElementById('turn');
  const statusText = document.getElementById('status');
  const btnRestart = document.getElementById('btnRestart');
  const btnResetScore = document.getElementById('btnResetScore');
  const scoreX = document.getElementById('scoreX');
  const scoreO = document.getElementById('scoreO');
  const scoreD = document.getElementById('scoreD');

  let board, current, running;
  let sx = 0, so = 0, sd = 0;

  const WIN = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];

  function renderBoard(){
    boardEl.innerHTML = '';
    board.forEach((v,i)=>{
      const c = document.createElement('div');
      c.className = 'cell';
      c.dataset.i = i;
      c.textContent = v;
      c.addEventListener('click', ()=>onCell(i,c));
      boardEl.appendChild(c);
    });
  }

  function onCell(i, el){
    if(!running || board[i]) return;
    board[i] = current;
    el.textContent = current;
    const win = checkWin();
    if(win){
      running = false;
      statusText.textContent = current + ' wins!';
      if(current === 'X') sx++; else so++;
      scoreX.textContent = sx; scoreO.textContent = so;
      flashWinningLine(win);
      setTimeout(()=>startRound(), 1200);
      return;
    }
    if(board.every(Boolean)){
      running = false;
      statusText.textContent = 'Draw!';
      sd++; scoreD.textContent = sd;
      setTimeout(()=>startRound(), 1200);
      return;
    }
    current = current === 'X' ? 'O' : 'X';
    statusTurn.textContent = current;
  }

  function checkWin(){
    for(const line of WIN){
      const [a,b,c] = line;
      if(board[a] && board[a] === board[b] && board[a] === board[c]) return line;
    }
    return null;
  }

  function flashWinningLine(line){
    line.forEach(i=>{
      const el = boardEl.querySelector(`[data-i="${i}"]`);
      if(!el) return;
      el.style.boxShadow = '0 8px 30px rgba(255,182,193,0.25)';
      el.style.transform = 'scale(1.03)';
    });
    setTimeout(()=> {
      line.forEach(i=>{
        const el = boardEl.querySelector(`[data-i="${i}"]`);
        if(!el) return;
        el.style.boxShadow = '';
        el.style.transform = '';
      });
    }, 900);
  }

  function startRound(){
    board = Array(9).fill('');
    current = 'X';
    running = true;
    statusTurn.textContent = current;
    statusText.textContent = 'Turn: ' + current;
    renderBoard();
  }

  btnRestart.addEventListener('click', ()=> startRound());
  btnResetScore.addEventListener('click', ()=> { sx=so=sd=0; scoreX.textContent='0'; scoreO.textContent='0'; scoreD.textContent='0'; showTemp('Scores reset'); });

  function showTemp(msg){
    const t = document.createElement('div');
    t.textContent = msg;
    t.style.position='fixed'; t.style.bottom='18px'; t.style.left='50%';
    t.style.transform='translateX(-50%)'; t.style.background='#111'; t.style.color='var(--pink)';
    t.style.padding='8px 12px'; t.style.borderRadius='8px'; t.style.boxShadow='0 8px 20px rgba(0,0,0,0.6)';
    document.body.appendChild(t);
    setTimeout(()=> t.remove(),1500);
  }

  function goBack(){
    // return to index (Prithi legacy) — assumes index at same folder
    window.location.href = './index.html';
  }

  // start
  startRound();
</script>
</body>
</html>
